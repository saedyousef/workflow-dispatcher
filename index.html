<!--
  Created by yousef on 12/23/2024 at 2:44 PM.
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workflow Dispatcher</title>
    <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>
<div class="container">
    <div class="form-container">
        <h2>Workflow Dispatcher</h2>
        <form id="dispatch-form">
            <div class="form-row">
                <div class="input-group">
                    <label for="owner">Owner</label><input type="text" id="owner" placeholder="Owner" required>
                </div>
                <div class="input-group">
                    <label for="repo">Repository</label><input type="text" id="repo" placeholder="Repository" required>
                </div>
            </div>

            <div class="form-row">
                <div class="input-group">
                    <label for="workflow">Workflow File</label>
                    <input type="text" id="workflow" placeholder="Workflow file e.g: deploy.yml" required>
                </div>
                <div class="input-group">
                    <label for="ref">Branch (ref)</label>
                    <input type="text" id="ref" placeholder="Branch (Ref) e.g: master" required>
                </div>
            </div>

            <div class="form-row">
                <div class="input-group">
                    <label for="pat">GitHub Personal Access Token (PAT)</label>
                    <input type="password" id="pat" placeholder="Personal Access Token (PAT)" required>
                </div>
            </div>

            <div class="form-row">
                <div class="theme-toggle in">
                    <input type="checkbox" id="save-pat">
                    <label class="toggleSwitch" for="save-pat"></label>
                    <span>Save PAT <small>(For future use)</small></span>
                </div>
            </div>
            <div class="form-row">
                <div class="form-row theme-toggle">
                    <input type="checkbox" id="log-history">
                    <label class="toggleSwitch" for="log-history"></label>
                    <span>Log workflow dispatch <small>(in local storage)</small></span>
                </div>
            </div>
            <div class="form-row">
                <label class="ui-switch">
                    <input type="checkbox" id="theme-switch">
                    <span></span>
                </label>
            </div>
            <div class="form-row">

                <button class="Btn cssbuttons-io-button" id="add-payload-field" type="button">

                    <div class="sign">+</div>

                    <div class="text">Add Payload</div>
                </button>
            </div>
            <div id="payload-container" class="form-row">

            </div>

            <button class="button">
                <svg
                        viewBox="0 0 16 16"
                        class="bi bi-lightning-charge-fill"
                        fill="currentColor"
                        height="16"
                        width="16"
                        xmlns="http://www.w3.org/2000/svg"
                >
                    <path
                            d="M11.251.068a.5.5 0 0 1 .227.58L9.677 6.5H13a.5.5 0 0 1 .364.843l-8 8.5a.5.5 0 0 1-.842-.49L6.323 9.5H3a.5.5 0 0 1-.364-.843l8-8.5a.5.5 0 0 1 .615-.09z"
                    ></path></svg
                >Dispatch Workflow
            </button>
        </form>
    </div>
    <div id="dispatch-history-container">
        <h2>History</h2>
        <table id="dispatch-history-table">
            <thead>
            <tr>
                <th>Owner</th>
                <th>Repo</th>
                <th>Workflow</th>
                <th>Ref</th>
                <th>Status</th>
                <th>Payload</th>
                <th>Error Message</th>
                <th>Timestamp</th>
            </tr>
            </thead>
            <tbody>
            <!-- Rows will be dynamically added here -->
            </tbody>
        </table>
    </div>
</div>

<div class="loading-container hidden">
    <span></span>
    <span></span>
    <span></span>
    <span></span>
</div>

<script src="dist/main.js" type="module"></script>
</body>
</html>
